<!DOCTYPE html>
<html lang="zh-CN">










<head><meta name="generator" content="Hexo 3.8.0">
    <meta charset="utf-8">
    <link rel="apple-touch-icon" sizes="76x76" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" href="/favicon.png">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="description" content>
    <meta name="author" content="Atlas-lili">
    <meta name="keywords" content>
    <title>XSS攻击杂谈 ~ Atlas-lili&#39;s Blog</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.2/css/all.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.7.4/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.7.4/css/mdb.min.css">
    <link rel="stylesheet" href="/css/style.css">
    <link rel="stylesheet" href="https://at.alicdn.com/t/font_1067060_vr10bjtg3us.css">
    
        <link rel="stylesheet" href="/css/Prettify/tomorrow-night-eighties.min.css">
    
</head>

<body>
  <header style="height: 50vh;">
    <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
<div class="container">
    <a class="navbar-brand" href="/"><strong>Atlas-lili&#39;s Blog</strong></a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
        <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <ul class="navbar-nav ml-auto text-center">
            
            <li class="nav-item">
                <a class="nav-link" href="/">Home</a>
            </li>
            
            <li class="nav-item">
                <a class="nav-link" href="/archives/">Archives</a>
            </li>
            
            <li class="nav-item">
                <a class="nav-link" href="/about/">About</a>
            </li>
            
        </ul>
    </div>
</div>


</nav>
    <div class="view intro-2" style='background: url("https://www.abnerchou.me/hexo-theme-react//assets/images/team/whiteboard.jpg")no-repeat center center;background-size: cover;'>
    <div class="full-bg-img">
        <div class="mask rgba-black-light flex-center">
        <div class="container text-center white-text wow fadeInUp">
            <p class="h2">XSS攻击杂谈</p>
            <br>
            
            <p>Sunday, July 28th 2019, 3:20 pm</p>
            
        </div>
        </div>
    </div>
    </div>
  </header>

  <main>
  
  <div class="container-fluid">
    <div class="row">
        <div class="col-md-8 offset-md-2 ">
            <div class="post-content py-5 z-depth-3 main">
                <blockquote>
<p>不存在一个提及XSS攻击就都可以应付的通法。需要根据需求思考可能存在的攻击点，做对应的处理。</p>
</blockquote>
<h5 id="什么是XSS攻击"><a href="#什么是XSS攻击" class="headerlink" title="什么是XSS攻击"></a>什么是XSS攻击</h5><p>XSS大名叫CSS  (Cross Site Script) ，跨站脚本攻击。它指的是恶意攻击者往Web页面里插入恶意html代码，当用户浏览该页之时，嵌入其中Web里面的html代码会被执行，从而达到恶意用户的特殊目的。<br><em>下面就一个url传参的然后在某个地方展现参数文本的场景讨论</em></p>
<h5 id="XSS攻击分类"><a href="#XSS攻击分类" class="headerlink" title="XSS攻击分类"></a>XSS攻击分类</h5><p>反射型：后端读取参数，参数夹杂在响应中。<br>存储型：后端读取参数、存储，需要拉取数据时返回给前端。<br>DOM型：前端读取参数（路由传参），参数插入在DOM结构中。</p>
<h5 id="防御XSS"><a href="#防御XSS" class="headerlink" title="防御XSS"></a>防御XSS</h5><h6 id="X-XSS-Protection"><a href="#X-XSS-Protection" class="headerlink" title="X-XSS-Protection"></a>X-XSS-Protection</h6><p>一个浏览器用来防御XSS攻击的HTTP头字段。</p>
<blockquote>
<p>X-XSS-Protection: 0<br>X-XSS-Protection: 1<br>X-XSS-Protection: 1; mode=block<br>X-XSS-Protection: 1; report=<reporting-uri></reporting-uri></p>
</blockquote>
<p><strong>0</strong>禁止XSS过滤。<br><strong>1</strong>启用XSS过滤（通常浏览器是默认的）。 如果检测到跨站脚本攻击，浏览器将清除页面（删除不安全的部分）。<br><strong>1; mode=block</strong>用XSS过滤。 如果检测到攻击，浏览器将不会清除页面，而是阻止页面加载。<br><strong>1; report=<reporting-uri></reporting-uri></strong>启用XSS过滤。 如果检测到跨站脚本攻击，浏览器将清除页面并使用CSP <code>report-uri</code>指令的功能发送违规报告。<br>缺点：只拦截HTML属性和节点，浏览器支持性不好。</p>
<h6 id="过滤"><a href="#过滤" class="headerlink" title="过滤"></a>过滤</h6><p>过滤是面对XSS的常规反应，但是要想好过滤什么。<br><em>怎么让一个参数内容是代码的时候另一边展示代码？</em><br>字符：&gt; –&gt; \&gt; &lt; –&gt; \&lt; &amp; —&gt; \&amp;<br>属性：on开头的统统干掉，src href data 要对url做校验（支持http、https或者相对路径，根据应用场景而定），style（因为老版本浏览器支持css expression，用户需要定制样式可以提供一些定制样式的class）<br>标签：script style link embed（嵌入资源，提防flash脚本） object（浏览器插件）<br><em>可不可以不要一刀切？</em><br>对于css expression可以做一个CSS过滤器不过会增加成本，而对于移动端H5的项目可以不用管，因为expreion已经废弃。<br>对于embed object如果不去除还要设置allowScript为none，等配置。<br><em>如何让用户输入的html在另外的地方作为html解析？</em><br>很少有这样的需求，富文本编辑器也是要点击上方提示样式按钮给特定模板语法的。可以通过白名单过滤解决，但是白名单的方案本身很勉强（受限于任知范围和HTML规范更新的支持）。</p>
<blockquote>
<p>对于XSS攻击的处理后端是一定要做的，在前端做会减轻后端的压力。后端也是具备解析HTML能力的（通过自己写的解析器或者开一个浏览器线程），不过对于后端的意义是不同的，作为一个XML节点。</p>
</blockquote>

                <hr>
                <div>
                    <p>
                         
                        <span class="badge badge-light">#&nbsp;杂谈</span>
                        &nbsp;
                        
                    </p>
                </div>
                <br>
                
                    <p class="note note-warning">本博客所有文章除特别声明外，均采用 <a href="https://zh.wikipedia.org/wiki/Wikipedia:CC_BY-SA_3.0%E5%8D%8F%E8%AE%AE%E6%96%87%E6%9C%AC">CC BY-SA 3.0协议</a> 。转载请注明出处！</p>
                
            </div>
        </div>
        <div class="d-none d-md-block col-md-2">
            
  <div id="toc" class="py-5">
    <p class="h6"><i class="iconfont icon-toc" style="vertical-align:middle"></i> Toc:</p> 
    <div id="tocbot"></div>
  </div>

        </div>
    </div>        
</div>

<br><br><br>

<!-- Comments -->
<div class="comments" id="comments">

    
    
 
</div>
  
  </main>

<footer class="mt-5">
  <div class="text-center py-3">
    <a href="https://hexo.io" target="_blank"><b>HEXO</b></a>
    <i class="iconfont icon-love"></i>
    <a href="https://github.com/0x2e/Material-T" target="_blank"> <b>Material-T</b></a>
  </div>
</footer>

  <!-- SCRIPTS -->
  <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.7.4/js/jquery-3.3.1.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.7.4/js/popper.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.7.4/js/bootstrap.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.7.4/js/mdb.min.js"></script>
  <script src="/js/main.js"></script>
  
    
      <script src="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.4.2/tocbot.min.js"></script>
    
    <script src="/js/post.js"></script>
    
      <script src="/js/plugins/prettify.js"></script>
      <script>
          $(document).ready(function(){
              $('pre').addClass('prettyprint linenums');
              prettyPrint();
          })
      </script>
    
  
</body>
</html>